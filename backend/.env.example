# ============================================================
# Savitara Backend — Environment Variable Reference
# ============================================================
# 1. Copy this file:  cp .env.example .env
# 2. Fill in real values (never commit .env to git)
# 3. APP_ENV controls which Settings subclass loads:
#      development  → DevelopmentSettings  (debug on, relaxed limits)
#      staging      → StagingSettings      (debug off, like prod)
#      production   → ProductionSettings   (strict validators enforced)
# ============================================================

# ── Environment Selection ────────────────────────────────────
APP_ENV=development          # development | staging | production
DEBUG=True                   # forced False in production regardless

# ── Security (REQUIRED — change before any deployment) ───────
# Generate with:  python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=REPLACE_WITH_64_CHAR_RANDOM_STRING
JWT_SECRET_KEY=REPLACE_WITH_DIFFERENT_64_CHAR_RANDOM_STRING
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60           # 60 min (default); increase in dev if desired
REFRESH_TOKEN_EXPIRE_DAYS=7

# ── CORS (comma-separated list, or JSON array) ────────────────
# Dev default is already permissive; override for staging/prod:
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:8081

# ── MongoDB ──────────────────────────────────────────────────
# Local:  mongodb://localhost:27017
# Atlas:  mongodb+srv://user:pass@cluster0.mongodb.net/?appName=Savitara
MONGODB_URL=mongodb://localhost:27017
MONGODB_DB_NAME=savitara
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_POOL_SIZE=100

# ── Redis Cache ───────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=300

# ── Google OAuth ──────────────────────────────────────────────
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/google/callback

# ── Razorpay (use test keys in dev) ──────────────────────────
RAZORPAY_KEY_ID=rzp_test_your_key_id
RAZORPAY_KEY_SECRET=your_razorpay_secret
RAZORPAY_WEBHOOK_SECRET=your_webhook_secret

# ── Firebase Cloud Messaging ──────────────────────────────────
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY_ID=your-private-key-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=your-client-id
FIREBASE_CREDENTIALS_PATH=./firebase-key.json

# ── Email (optional) ──────────────────────────────────────────
# EMAIL_PROVIDER=smtp   (or sendgrid)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your@gmail.com
SMTP_PASSWORD=your-app-password        # Gmail: use App Password not main password
EMAIL_FROM=noreply@savitara.com
EMAIL_FROM_NAME=Savitara
# SENDGRID_API_KEY=SG.xxxxx            # Only needed when EMAIL_PROVIDER=sendgrid

# ── SMS — Twilio (optional) ───────────────────────────────────
# TWILIO_ACCOUNT_SID=ACxxxx
# TWILIO_AUTH_TOKEN=your-auth-token
# TWILIO_PHONE_NUMBER=+1234567890

# ── Rate Limiting ─────────────────────────────────────────────
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_PER_MINUTE=10

# ── Logging ───────────────────────────────────────────────────
LOG_LEVEL=INFO                         # DEBUG | INFO | WARNING | ERROR
LOG_FILE=logs/savitara.log

# ── Error Tracking ────────────────────────────────────────────
# SENTRY_DSN=https://xxx@oXXX.ingest.sentry.io/XXX

# ── Elasticsearch (optional) ─────────────────────────────────
ENABLE_ELASTICSEARCH=false             # set to true when ES is running
ELASTICSEARCH_HOSTS=["http://localhost:9200"]
# ELASTICSEARCH_USERNAME=elastic
# ELASTICSEARCH_PASSWORD=changeme

# ── Encryption ────────────────────────────────────────────────
ENABLE_ENCRYPTION=true
# ENCRYPTION_KEY=REPLACE_WITH_32_BYTE_BASE64_KEY

# ── Feature Flags ─────────────────────────────────────────────
ENABLE_AUDIT_LOGGING=true
ENABLE_COMPRESSION=true
ENABLE_RATE_LIMITING=true
ENABLE_WEBSOCKETS=true

# ── Business Rules ────────────────────────────────────────────
PLATFORM_FEE_PERCENTAGE=10.0
ACHARYA_COMMISSION_PERCENTAGE=85.0
MIN_BOOKING_AMOUNT=500.0
MAX_BOOKING_AMOUNT=100000.0
REFERRAL_CREDITS=50.0

# ── Admin ─────────────────────────────────────────────────────
# ADMIN_API_KEY=REPLACE_WITH_STRONG_RANDOM_KEY
# Email address that receives automatic SUPER_ADMIN role on first login / seed
SUPER_ADMIN_EMAIL=your-superadmin@example.com

# ── Development Helpers (NEVER set in production) ─────────────
TEST_MODE=false
SKIP_OTP_VERIFICATION=false            # set true in dev to skip SMS OTP
TEST_OTP_CODE=123456


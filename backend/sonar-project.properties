# SonarQube Configuration for Savitara Backend
# Documentation: https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/

# Project Information
sonar.projectKey=savitara-backend
sonar.projectName=Savitara Backend
sonar.projectVersion=1.0.0

# Source Code Location
sonar.sources=app
sonar.tests=tests

# Python Specific
sonar.language=py
sonar.python.version=3.11

# Exclusions
# Exclude Python standard library, virtual environments, and build artifacts
sonar.exclusions=**/__pycache__/**,**/migrations/**,**/venv/**,**/.venv/**,**/*.pyc,**/.vscode/**,**/extensions/**,**/typeshed-fallback/**,**/site-packages/**,**/Lib/**

# Scan only project sources (ignore system Python installation)
sonar.python.file.suffixes=.py
sonar.python.exclusions=**/Python*/Lib/**,**/Python*/libs/**

# Test Coverage
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.xunit.reportPath=test-results/pytest.xml

# Code Quality Rules
sonar.qualitygate.wait=true
sonar.python.pylint.reportPath=pylint-report.txt

# Security
sonar.security.hotspots.maxAge=365

# Duplications
sonar.cpd.exclusions=**/models/**,**/schemas/**

# Encoding
sonar.sourceEncoding=UTF-8

# Issue Ignore Patterns
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7

# Rule e1: Ignore TODO comments in development
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py

# Rule e2: Ignore cognitive complexity in aggregation pipelines
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/db/**

# Rule e3: Ignore cognitive complexity in bookings API (complex state machine logic)
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e3.resourceKey=**/api/v1/bookings.py

# Rule e4: Ignore FIXME/TODO in system files (builtins.pyi, typing.py)
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S1134
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.pyi

# Rule e5: Ignore iterator protocol in stub files
sonar.issue.ignore.multicriteria.e5.ruleKey=python:S2876
sonar.issue.ignore.multicriteria.e5.resourceKey=**/*.pyi

# Rule e6: Ignore all issues in typing.py standard library
sonar.issue.ignore.multicriteria.e6.ruleKey=python:*
sonar.issue.ignore.multicriteria.e6.resourceKey=**/typing.py

# Rule e7: Ignore all issues in .pyi stub files
sonar.issue.ignore.multicriteria.e7.ruleKey=python:*
sonar.issue.ignore.multicriteria.e7.resourceKey=**/*.pyi
